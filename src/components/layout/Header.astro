---
import LanguageSwitcher from '../shared/LanguageSwitcher.jsx';
import { getLanguageFromCookie, getTranslations } from '../../i18n/utils';

const currentPath = Astro.url.pathname;
const lang = getLanguageFromCookie(Astro.request.headers.get('cookie') || '');
const t = getTranslations(lang);

const navItems = [
	{ name: t.nav.home, href: '/' },
	{ name: t.nav.book, href: '/book' },
	{ name: t.nav.destinations, href: '/destinations' },
	{ name: t.nav.checkin, href: '/check-in' },
	{ name: t.nav.manage, href: '/manage-booking' },
	{ name: t.nav.about, href: '/about' },
];
---

<nav class="bg-white border-gray-200 dark:bg-gray-900 fixed w-full z-50 top-0 start-0 border-b border-gray-200 dark:border-gray-600 shadow-sm">
	<div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4">
		<a href="/" class="flex items-center space-x-3 rtl:space-x-reverse">
			<svg class="h-8 w-8 text-primary-600" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
				<path d="M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z"/>
			</svg>
			<span class="self-center text-2xl font-bold whitespace-nowrap text-primary-600 dark:text-white">
				{t.brand}
			</span>
		</a>

		<div class="flex md:order-2 space-x-3 md:space-x-0 rtl:space-x-reverse items-center gap-2">
			<LanguageSwitcher client:load />
			<button type="button" class="text-white bg-primary-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800 hidden md:block">
				{t.nav.signin}
			</button>
			<button data-collapse-toggle="navbar-cta" type="button" class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="navbar-cta" aria-expanded="false">
				<span class="sr-only">Open main menu</span>
				<svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 17 14">
					<path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 1h15M1 7h15M1 13h15"/>
				</svg>
			</button>
		</div>

		<div class="items-center justify-between hidden w-full md:flex md:w-auto md:order-1" id="navbar-cta">
			<ul class="flex flex-col font-medium p-4 md:p-0 mt-4 border border-gray-100 rounded-lg bg-gray-50 md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0 md:bg-white dark:bg-gray-800 md:dark:bg-gray-900 dark:border-gray-700">
				{navItems.map((item) => (
					<li>
						<a
							href={item.href}
							class={`block py-2 px-3 md:p-0 rounded ${
								currentPath === item.href
									? 'text-white bg-primary-600 md:bg-transparent md:text-primary-600 dark:text-white'
									: 'text-gray-900 hover:bg-gray-100 md:hover:bg-transparent md:hover:text-primary-600 dark:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700'
							}`}
							aria-current={currentPath === item.href ? 'page' : undefined}
						>
							{item.name}
						</a>
					</li>
				))}
			</ul>
		</div>
	</div>
</nav>

<!-- Spacer to prevent content from going under fixed navbar -->
<div class="h-[73px]"></div>
